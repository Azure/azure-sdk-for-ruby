sudo: false
language: ruby
rvm:
- 2.0.0
script:
- cd service_management/azure && bundle install && bundle exec rake test:unit
- if [ "$INTEG_RECORDED" == "true" ] ; then bundle exec rake test:recorded ; fi
- cd ../../resource_management && bundle install
- if [ "$INTEG_RECORDED" == "true" ] ; then rake arm:spec ; fi
- cd ..
deploy:
  provider: rubygems
  edge:
    source: vishrutshah/dpl
    branch: gemspec_with_path
  api_key:
    secure: dummysecretkey
  gemspec: service_management/azure/azure.gemspec
  on:
    tags: true
    repo: vishrutshah/azure-sdk-for-ruby
