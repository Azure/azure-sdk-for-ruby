# encoding: utf-8
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is
# regenerated.

module Azure::Batch::V2017_06_01_5_1
  module Models
    #
    # A compute node in the Batch service.
    #
    #
    class ComputeNode

      include MsRestAzure

      # @return [String] The ID of the compute node. Every node that is added
      # to a pool is assigned a unique ID. Whenever a node is removed from a
      # pool, all of its local files are deleted, and the ID is reclaimed and
      # could be reused for new nodes.
      attr_accessor :id

      # @return [String] The URL of the compute node.
      attr_accessor :url

      # @return [ComputeNodeState] The current state of the compute node.
      # Values are:
      #
      # idle - The node is not currently running a task.
      # rebooting - The node is rebooting.
      # reimaging - The node is reimaging.
      # running - The node is running one or more tasks (other than a start
      # task).
      # unusable - The node cannot be used for task execution due to errors.
      # creating - The Batch service has obtained the underlying virtual
      # machine from Azure Compute, but it has not yet started to join the
      # pool.
      # starting - the Batch service is starting on the underlying virtual
      # machine.
      # waitingforstarttask - The start task has started running on the compute
      # node, but waitForSuccess is set and the start task has not yet
      # completed.
      # starttaskfailed - The start task has failed on the compute node (and
      # exhausted all retries), and waitForSuccess is set. The node is not
      # usable for running tasks.
      # unknown - The Batch service has lost contact with the node, and does
      # not know its true state.
      # leavingpool - The node is leaving the pool, either because the user
      # explicitly removed it or because the pool is resizing or autoscaling
      # down.
      # offline - The node is not currently running a task, and scheduling of
      # new tasks to the node is disabled.
      # preempted - The low-priority node has been preempted. Tasks which were
      # running on the node when it was preempted will be rescheduled when
      # another node becomes available. Possible values include: 'idle',
      # 'rebooting', 'reimaging', 'running', 'unusable', 'creating',
      # 'starting', 'waitingForStartTask', 'startTaskFailed', 'unknown',
      # 'leavingPool', 'offline', 'preempted'
      attr_accessor :state

      # @return [SchedulingState] Whether the compute node is available for
      # task scheduling. Values are:
      #
      # enabled - Tasks can be scheduled on the node.
      # disabled - No new tasks will be scheduled on the node. Tasks already
      # running on the node may still run to completion. All nodes start with
      # scheduling enabled. Possible values include: 'enabled', 'disabled'
      attr_accessor :scheduling_state

      # @return [DateTime] The time at which the compute node entered its
      # current state.
      attr_accessor :state_transition_time

      # @return [DateTime] The time at which the compute node was started. This
      # property may not be present if the node state is unusable.
      attr_accessor :last_boot_time

      # @return [DateTime] The time at which this compute node was allocated to
      # the pool.
      attr_accessor :allocation_time

      # @return [String] The IP address that other compute nodes can use to
      # communicate with this compute node. Every node that is added to a pool
      # is assigned a unique IP address. Whenever a node is removed from a
      # pool, all of its local files are deleted, and the IP address is
      # reclaimed and could be reused for new nodes.
      attr_accessor :ip_address

      # @return [String] An identifier which can be passed when adding a task
      # to request that the task be scheduled on this node. Note that this is
      # just a soft affinity. If the target node is busy or unavailable at the
      # time the task is scheduled, then the task will be scheduled elsewhere.
      attr_accessor :affinity_id

      # @return [String] The size of the virtual machine hosting the compute
      # node. For information about available sizes of virtual machines for
      # Cloud Services pools (pools created with cloudServiceConfiguration),
      # see Sizes for Cloud Services
      # (http://azure.microsoft.com/documentation/articles/cloud-services-sizes-specs/).
      # Batch supports all Cloud Services VM sizes except ExtraSmall, A1V2 and
      # A2V2. For information about available VM sizes for pools using images
      # from the Virtual Machines Marketplace (pools created with
      # virtualMachineConfiguration) see Sizes for Virtual Machines (Linux)
      # (https://azure.microsoft.com/documentation/articles/virtual-machines-linux-sizes/)
      # or Sizes for Virtual Machines (Windows)
      # (https://azure.microsoft.com/documentation/articles/virtual-machines-windows-sizes/).
      # Batch supports all Azure VM sizes except STANDARD_A0 and those with
      # premium storage (STANDARD_GS, STANDARD_DS, and STANDARD_DSV2 series).
      attr_accessor :vm_size

      # @return [Integer] The total number of job tasks completed on the
      # compute node. This includes Job Preparation, Job Release and Job
      # Manager tasks, but not the pool start task.
      attr_accessor :total_tasks_run

      # @return [Integer] The total number of currently running job tasks on
      # the compute node. This includes Job Preparation, Job Release, and Job
      # Manager tasks, but not the pool start task.
      attr_accessor :running_tasks_count

      # @return [Integer] The total number of job tasks which completed
      # successfully (with exitCode 0) on the compute node. This includes Job
      # Preparation, Job Release, and Job Manager tasks, but not the pool start
      # task.
      attr_accessor :total_tasks_succeeded

      # @return [Array<TaskInformation>] A list of tasks whose state has
      # recently changed. This property is present only if at least one task
      # has run on this node since it was assigned to the pool.
      attr_accessor :recent_tasks

      # @return [StartTask] The task specified to run on the compute node as it
      # joins the pool.
      attr_accessor :start_task

      # @return [StartTaskInformation] Runtime information about the execution
      # of the start task on the compute node.
      attr_accessor :start_task_info

      # @return [Array<CertificateReference>] The list of certificates
      # installed on the compute node. For Windows compute nodes, the Batch
      # service installs the certificates to the specified certificate store
      # and location. For Linux compute nodes, the certificates are stored in a
      # directory inside the task working directory and an environment variable
      # AZ_BATCH_CERTIFICATES_DIR is supplied to the task to query for this
      # location. For certificates with visibility of 'remoteUser', a 'certs'
      # directory is created in the user's home directory (e.g.,
      # /home/{user-name}/certs) and certificates are placed in that directory.
      attr_accessor :certificate_references

      # @return [Array<ComputeNodeError>] The list of errors that are currently
      # being encountered by the compute node.
      attr_accessor :errors

      # @return [Boolean] Whether this compute node is a dedicated node. If
      # false, the node is a low-priority node.
      attr_accessor :is_dedicated

      # @return [ComputeNodeEndpointConfiguration] The endpoint configuration
      # for the compute node.
      attr_accessor :endpoint_configuration


      #
      # Mapper for ComputeNode class as Ruby Hash.
      # This will be used for serialization/deserialization.
      #
      def self.mapper()
        {
          client_side_validation: true,
          required: false,
          serialized_name: 'ComputeNode',
          type: {
            name: 'Composite',
            class_name: 'ComputeNode',
            model_properties: {
              id: {
                client_side_validation: true,
                required: false,
                serialized_name: 'id',
                type: {
                  name: 'String'
                }
              },
              url: {
                client_side_validation: true,
                required: false,
                serialized_name: 'url',
                type: {
                  name: 'String'
                }
              },
              state: {
                client_side_validation: true,
                required: false,
                serialized_name: 'state',
                type: {
                  name: 'Enum',
                  module: 'ComputeNodeState'
                }
              },
              scheduling_state: {
                client_side_validation: true,
                required: false,
                serialized_name: 'schedulingState',
                type: {
                  name: 'Enum',
                  module: 'SchedulingState'
                }
              },
              state_transition_time: {
                client_side_validation: true,
                required: false,
                serialized_name: 'stateTransitionTime',
                type: {
                  name: 'DateTime'
                }
              },
              last_boot_time: {
                client_side_validation: true,
                required: false,
                serialized_name: 'lastBootTime',
                type: {
                  name: 'DateTime'
                }
              },
              allocation_time: {
                client_side_validation: true,
                required: false,
                serialized_name: 'allocationTime',
                type: {
                  name: 'DateTime'
                }
              },
              ip_address: {
                client_side_validation: true,
                required: false,
                serialized_name: 'ipAddress',
                type: {
                  name: 'String'
                }
              },
              affinity_id: {
                client_side_validation: true,
                required: false,
                serialized_name: 'affinityId',
                type: {
                  name: 'String'
                }
              },
              vm_size: {
                client_side_validation: true,
                required: false,
                serialized_name: 'vmSize',
                type: {
                  name: 'String'
                }
              },
              total_tasks_run: {
                client_side_validation: true,
                required: false,
                serialized_name: 'totalTasksRun',
                type: {
                  name: 'Number'
                }
              },
              running_tasks_count: {
                client_side_validation: true,
                required: false,
                serialized_name: 'runningTasksCount',
                type: {
                  name: 'Number'
                }
              },
              total_tasks_succeeded: {
                client_side_validation: true,
                required: false,
                serialized_name: 'totalTasksSucceeded',
                type: {
                  name: 'Number'
                }
              },
              recent_tasks: {
                client_side_validation: true,
                required: false,
                serialized_name: 'recentTasks',
                type: {
                  name: 'Sequence',
                  element: {
                      client_side_validation: true,
                      required: false,
                      serialized_name: 'TaskInformationElementType',
                      type: {
                        name: 'Composite',
                        class_name: 'TaskInformation'
                      }
                  }
                }
              },
              start_task: {
                client_side_validation: true,
                required: false,
                serialized_name: 'startTask',
                type: {
                  name: 'Composite',
                  class_name: 'StartTask'
                }
              },
              start_task_info: {
                client_side_validation: true,
                required: false,
                serialized_name: 'startTaskInfo',
                type: {
                  name: 'Composite',
                  class_name: 'StartTaskInformation'
                }
              },
              certificate_references: {
                client_side_validation: true,
                required: false,
                serialized_name: 'certificateReferences',
                type: {
                  name: 'Sequence',
                  element: {
                      client_side_validation: true,
                      required: false,
                      serialized_name: 'CertificateReferenceElementType',
                      type: {
                        name: 'Composite',
                        class_name: 'CertificateReference'
                      }
                  }
                }
              },
              errors: {
                client_side_validation: true,
                required: false,
                serialized_name: 'errors',
                type: {
                  name: 'Sequence',
                  element: {
                      client_side_validation: true,
                      required: false,
                      serialized_name: 'ComputeNodeErrorElementType',
                      type: {
                        name: 'Composite',
                        class_name: 'ComputeNodeError'
                      }
                  }
                }
              },
              is_dedicated: {
                client_side_validation: true,
                required: false,
                serialized_name: 'isDedicated',
                type: {
                  name: 'Boolean'
                }
              },
              endpoint_configuration: {
                client_side_validation: true,
                required: false,
                serialized_name: 'endpointConfiguration',
                type: {
                  name: 'Composite',
                  class_name: 'ComputeNodeEndpointConfiguration'
                }
              }
            }
          }
        }
      end
    end
  end
end
