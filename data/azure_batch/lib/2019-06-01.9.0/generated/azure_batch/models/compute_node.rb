# encoding: utf-8
# Code generated by Microsoft (R) AutoRest Code Generator.
# Changes may cause incorrect behavior and will be lost if the code is
# regenerated.

module Azure::Batch::V2019_06_01_9_0
  module Models
    #
    # A Compute Node in the Batch service.
    #
    #
    class ComputeNode

      include MsRestAzure

      # @return [String] The ID of the Compute Node. Every Compute Node that is
      # added to a Pool is assigned a unique ID. Whenever a Compute Node is
      # removed from a Pool, all of its local files are deleted, and the ID is
      # reclaimed and could be reused for new Compute Nodes.
      attr_accessor :id

      # @return [String] The URL of the Compute Node.
      attr_accessor :url

      # @return [ComputeNodeState] The current state of the Compute Node. The
      # low-priority Compute Node has been preempted. Tasks which were running
      # on the Compute Node when it was preempted will be rescheduled when
      # another Compute Node becomes available. Possible values include:
      # 'idle', 'rebooting', 'reimaging', 'running', 'unusable', 'creating',
      # 'starting', 'waitingForStartTask', 'startTaskFailed', 'unknown',
      # 'leavingPool', 'offline', 'preempted'
      attr_accessor :state

      # @return [SchedulingState] Whether the Compute Node is available for
      # Task scheduling. Possible values include: 'enabled', 'disabled'
      attr_accessor :scheduling_state

      # @return [DateTime] The time at which the Compute Node entered its
      # current state.
      attr_accessor :state_transition_time

      # @return [DateTime] The last time at which the Compute Node was started.
      # This property may not be present if the Compute Node state is unusable.
      attr_accessor :last_boot_time

      # @return [DateTime] The time at which this Compute Node was allocated to
      # the Pool. This is the time when the Compute Node was initially
      # allocated and doesn't change once set. It is not updated when the
      # Compute Node is service healed or preempted.
      attr_accessor :allocation_time

      # @return [String] The IP address that other Nodes can use to communicate
      # with this Compute Node. Every Compute Node that is added to a Pool is
      # assigned a unique IP address. Whenever a Compute Node is removed from a
      # Pool, all of its local files are deleted, and the IP address is
      # reclaimed and could be reused for new Compute Nodes.
      attr_accessor :ip_address

      # @return [String] An identifier which can be passed when adding a Task
      # to request that the Task be scheduled on this Compute Node. Note that
      # this is just a soft affinity. If the target Compute Node is busy or
      # unavailable at the time the Task is scheduled, then the Task will be
      # scheduled elsewhere.
      attr_accessor :affinity_id

      # @return [String] The size of the virtual machine hosting the Compute
      # Node. For information about available sizes of virtual machines in
      # Pools, see Choose a VM size for Compute Nodes in an Azure Batch Pool
      # (https://docs.microsoft.com/azure/batch/batch-pool-vm-sizes).
      attr_accessor :vm_size

      # @return [Integer] The total number of Job Tasks completed on the
      # Compute Node. This includes Job Manager Tasks and normal Tasks, but not
      # Job Preparation, Job Release or Start Tasks.
      attr_accessor :total_tasks_run

      # @return [Integer] The total number of currently running Job Tasks on
      # the Compute Node. This includes Job Manager Tasks and normal Tasks, but
      # not Job Preparation, Job Release or Start Tasks.
      attr_accessor :running_tasks_count

      # @return [Integer] The total number of Job Tasks which completed
      # successfully (with exitCode 0) on the Compute Node. This includes Job
      # Manager Tasks and normal Tasks, but not Job Preparation, Job Release or
      # Start Tasks.
      attr_accessor :total_tasks_succeeded

      # @return [Array<TaskInformation>] A list of Tasks whose state has
      # recently changed. This property is present only if at least one Task
      # has run on this Compute Node since it was assigned to the Pool.
      attr_accessor :recent_tasks

      # @return [StartTask] The Task specified to run on the Compute Node as it
      # joins the Pool.
      attr_accessor :start_task

      # @return [StartTaskInformation] Runtime information about the execution
      # of the start Task on the Compute Node.
      attr_accessor :start_task_info

      # @return [Array<CertificateReference>] The list of Certificates
      # installed on the Compute Node. For Windows Nodes, the Batch service
      # installs the Certificates to the specified Certificate store and
      # location. For Linux Compute Nodes, the Certificates are stored in a
      # directory inside the Task working directory and an environment variable
      # AZ_BATCH_CERTIFICATES_DIR is supplied to the Task to query for this
      # location. For Certificates with visibility of 'remoteUser', a 'certs'
      # directory is created in the user's home directory (e.g.,
      # /home/{user-name}/certs) and Certificates are placed in that directory.
      attr_accessor :certificate_references

      # @return [Array<ComputeNodeError>] The list of errors that are currently
      # being encountered by the Compute Node.
      attr_accessor :errors

      # @return [Boolean] Whether this Compute Node is a dedicated Compute
      # Node. If false, the Compute Node is a low-priority Compute Node.
      attr_accessor :is_dedicated

      # @return [ComputeNodeEndpointConfiguration] The endpoint configuration
      # for the Compute Node.
      attr_accessor :endpoint_configuration

      # @return [NodeAgentInformation] Information about the Compute Node agent
      # version and the time the Compute Node upgraded to a new version.
      attr_accessor :node_agent_info


      #
      # Mapper for ComputeNode class as Ruby Hash.
      # This will be used for serialization/deserialization.
      #
      def self.mapper()
        {
          client_side_validation: true,
          required: false,
          serialized_name: 'ComputeNode',
          type: {
            name: 'Composite',
            class_name: 'ComputeNode',
            model_properties: {
              id: {
                client_side_validation: true,
                required: false,
                serialized_name: 'id',
                type: {
                  name: 'String'
                }
              },
              url: {
                client_side_validation: true,
                required: false,
                serialized_name: 'url',
                type: {
                  name: 'String'
                }
              },
              state: {
                client_side_validation: true,
                required: false,
                serialized_name: 'state',
                type: {
                  name: 'Enum',
                  module: 'ComputeNodeState'
                }
              },
              scheduling_state: {
                client_side_validation: true,
                required: false,
                serialized_name: 'schedulingState',
                type: {
                  name: 'Enum',
                  module: 'SchedulingState'
                }
              },
              state_transition_time: {
                client_side_validation: true,
                required: false,
                serialized_name: 'stateTransitionTime',
                type: {
                  name: 'DateTime'
                }
              },
              last_boot_time: {
                client_side_validation: true,
                required: false,
                serialized_name: 'lastBootTime',
                type: {
                  name: 'DateTime'
                }
              },
              allocation_time: {
                client_side_validation: true,
                required: false,
                serialized_name: 'allocationTime',
                type: {
                  name: 'DateTime'
                }
              },
              ip_address: {
                client_side_validation: true,
                required: false,
                serialized_name: 'ipAddress',
                type: {
                  name: 'String'
                }
              },
              affinity_id: {
                client_side_validation: true,
                required: false,
                serialized_name: 'affinityId',
                type: {
                  name: 'String'
                }
              },
              vm_size: {
                client_side_validation: true,
                required: false,
                serialized_name: 'vmSize',
                type: {
                  name: 'String'
                }
              },
              total_tasks_run: {
                client_side_validation: true,
                required: false,
                serialized_name: 'totalTasksRun',
                type: {
                  name: 'Number'
                }
              },
              running_tasks_count: {
                client_side_validation: true,
                required: false,
                serialized_name: 'runningTasksCount',
                type: {
                  name: 'Number'
                }
              },
              total_tasks_succeeded: {
                client_side_validation: true,
                required: false,
                serialized_name: 'totalTasksSucceeded',
                type: {
                  name: 'Number'
                }
              },
              recent_tasks: {
                client_side_validation: true,
                required: false,
                serialized_name: 'recentTasks',
                type: {
                  name: 'Sequence',
                  element: {
                      client_side_validation: true,
                      required: false,
                      serialized_name: 'TaskInformationElementType',
                      type: {
                        name: 'Composite',
                        class_name: 'TaskInformation'
                      }
                  }
                }
              },
              start_task: {
                client_side_validation: true,
                required: false,
                serialized_name: 'startTask',
                type: {
                  name: 'Composite',
                  class_name: 'StartTask'
                }
              },
              start_task_info: {
                client_side_validation: true,
                required: false,
                serialized_name: 'startTaskInfo',
                type: {
                  name: 'Composite',
                  class_name: 'StartTaskInformation'
                }
              },
              certificate_references: {
                client_side_validation: true,
                required: false,
                serialized_name: 'certificateReferences',
                type: {
                  name: 'Sequence',
                  element: {
                      client_side_validation: true,
                      required: false,
                      serialized_name: 'CertificateReferenceElementType',
                      type: {
                        name: 'Composite',
                        class_name: 'CertificateReference'
                      }
                  }
                }
              },
              errors: {
                client_side_validation: true,
                required: false,
                serialized_name: 'errors',
                type: {
                  name: 'Sequence',
                  element: {
                      client_side_validation: true,
                      required: false,
                      serialized_name: 'ComputeNodeErrorElementType',
                      type: {
                        name: 'Composite',
                        class_name: 'ComputeNodeError'
                      }
                  }
                }
              },
              is_dedicated: {
                client_side_validation: true,
                required: false,
                serialized_name: 'isDedicated',
                type: {
                  name: 'Boolean'
                }
              },
              endpoint_configuration: {
                client_side_validation: true,
                required: false,
                serialized_name: 'endpointConfiguration',
                type: {
                  name: 'Composite',
                  class_name: 'ComputeNodeEndpointConfiguration'
                }
              },
              node_agent_info: {
                client_side_validation: true,
                required: false,
                serialized_name: 'nodeAgentInfo',
                type: {
                  name: 'Composite',
                  class_name: 'NodeAgentInformation'
                }
              }
            }
          }
        }
      end
    end
  end
end
